[GENERAL]

initial landmark = AAEE01000001:451000-478999

examples = AAEE01000001:451000-478999 CM000436:10000-35000 CM000433:106357-116356 cgd6_780 CMU_011540

#include "bam/cryptodb_bam_category.conf"
#include "common_general.conf"
#include "bam/cryptodb_bam_db.conf"

#include "unifiedMassSpec.conf"
#include "common/synteny.conf"
#include "nrdbBlat.conf"
#include "common_tracks.conf"

[Synteny]
subtrack table  = :"Chom contig" 'Cryptosporidium hominis TU502' contig =chom_span ;
                  :"Chom genes" 'Cryptosporidium hominis TU502' genes =chom_gene ;
                  :"Cmur contig" 'Cryptosporidium muris RN66' contig =cmur_span ;
                  :"Cmur genes" 'Cryptosporidium muris RN66' genes =cmur_gene ;
                  :"Cpar contig" 'Cryptosporidium parvum Iowa II' contig =cpar_span ;
                  :"Cpar genes" 'Cryptosporidium parvum Iowa II' genes =cpar_gene ;


[SNPs]
feature  = SNP:Widmer
category = Population Biology: A. SNPs (show < 61k for details)
glyph    = diamond
key      = SNPs
bgcolor	= sub { GBrowse::Display::snpBgFromIsCodingAndNonSyn(shift) }
fgcolor  = bgcolor
label density = 2
height = sub { GBrowse::Display::snpHeight(shift) }
citation = SNPs from G. Widmer. <ul><li>Blue for non-synonymous SNPs.<li>Light blue for synonymous SNPs.  <li>Clear for non-coding SNPs.</ul>
title = sub{}
balloon hover = sub { GBrowse::PopupAndLinks::snpTitleQuick(shift) }

[HtsAlignmentSNPsByClass]
feature  = htsSNP:Alignment
category = Population Biology: A. SNPs (show < 61k for details)
glyph    = diamond
key      = HTS SNPs by coding potential
bgcolor   = sub { GBrowse::Display::snpBgFromIsCodingAndNonSyn(shift) }
fgcolor  = bgcolor
title = sub{}
balloon hover= sub { GBrowse::PopupAndLinks::htsSnpTitleQuick(shift) }
balloon sticky  = 1
label density = 2
height = sub { GBrowse::Display::snpHeight(shift) }
citation = HTS SNPs identified by alignment of HTS reads and VarScan SNP calling
  <p><table width="50%">
  <tr><th align="left" width="60">Color</th><th align="left">Class</th></th></tr>
  <tr><td bgcolor='black'><font color="whitesmoke"><b>White</b></font></td><td>&nbsp;Non-Coding</td></tr>
  <tr><td><font color="blue"><b>Blue</b></font></td><td>&nbsp;Coding (non-synonymous)</td></tr>
  <tr><td><font color="lightblue"><b>LightBlue</b></font></td><td>&nbsp;Coding (synonymous)</td></tr>
  </table>
  Please note: pop-up box will show details if viewing region is less than 60 kbp.


#filterOrganism=C. parvum
[WastlingMassSpecPeptides]
feature      = domain:Wastling 
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Wastling&&edName:in('cparIowaII_massSpec_Wastling_RSRC')
#feature      = domain:MassSpecPeptides 
#filter       = sub { GBrowse::Filter::filterByExtDbName(shift, 'Wastling MassSpec') }
glyph        = segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
bgcolor = sub { GBrowse::Display::massSpecBgColor(shift) }
fgcolor      =  sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'black', 'grey') }
connector_color = grey
connector    = hat
height       = sub { GBrowse::Display::heightByCount(shift,32) }
pad_bottom   = -1
description  = 0 
title  = sub {}
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift, 'Wastling MassSpec') }
label 		 = 0
category  = Protein Expression Evidence
key       = MS/MS Peptides (Wastling, et al.)
citation  =  Analysis by J.M.
             Wastling, S. Sanderson, D. Xia and A.Z. Siddiki. 
             Departments of Pre-Clinical Veterinary Science & Veterinary Pathology, University of Liverpool, 
             Crown Street, Liverpool, United Kingdom L69 7ZJ.


#filterOrganism=C. parvum
[LoweryMassSpecPeptides]
feature      = domain:Lowery 
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Lowery&&edName:in(
                  'cparIowaII_massSpec_Lowery_LC_MSMS_RSRC')
#feature      = domain:MassSpecPeptides 
#filter       = sub { GBrowse::Filter::filterByExtDbName(shift, 'Lowery MassSpec') }
#filter = sub { $CFG->filter_to_depth( @_, 'LoweryMassSpecPeptides', 5) }
glyph        =  segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = grey
fgcolor      =  sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'black', 'black') }
connector_color = black
connector = hat
bgcolor = sub { GBrowse::Display::massSpecBgColor(shift) }
height       = sub { GBrowse::Display::heightByCount(shift,32) }
pad_bottom   = -1
description  = 0 
title  = sub {}
#bump density = 100
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift, 'Lowery MassSpec') }
label 		 = 0
category  = Protein Expression Evidence
key       = MS/MS Peptides (Snelling, et al.)
citation  =  Analysis by William J. Snelling<sup>1</sup>, Qishan Lin<sup>2</sup>, John E. Moore<sup>3</sup>, B. Cherie Millar<sup>3</sup>,
             Fabio Tosini<sup>4</sup>, Edoardo Pozio<sup>4</sup>, James S.G. Dooley<sup>1</sup>, and Colm J. Lowery<sup>1</sup><br>
             <sup>1</sup>Centre for Molecular Biosciences, School of Biomedical Sciences,
             University of Ulster, Cromore Road, Coleraine, County Londonderry, N.
             Ireland, BT52 1SA.
             <sup>2</sup>UAlbany Proteomics Facility, Centre for Functional Genomics, University of
             Albany, One Discovery Drive, Rensselaer, NY 12144.
             <sup>3</sup>Northern Ireland Public Health Laboratory, Department of Bacteriology,
             Belfast City Hospital, Belfast, N. Ireland, BT9 7AD.
             <sup>4</sup>Department of Infectious, Parasitic, and Immunomediated Diseases, Istituto
             Superiore di Sanit&#224;, Rome, Italy.<br>
             <a href="http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?cmd=Retrieve&db=pubmed&dopt=Abstract&list_uids=17124246">
   		    Proteomics analysis and protein expression during sporozoite excystation of Cryptosporidium parvum (Coccidia, Apicomplexa).
		    Mol. Cell Proteomics 2007 Feb;6(2):346-55
		    </a>

#filterOrganism=C. parvum
[EinsteinMassSpecPeptides]
feature      = domain:Einstein 
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Einstein&&edName:in('cparIowaII_massSpec_Fiser_RSRC')
#feature      = domain:MassSpecPeptides 
#filter       = sub { GBrowse::Filter::filterByExtDbName(shift, 'Fiser_Proteomics') }
#filter = sub { $CFG->filter_to_depth( @_, 'EinsteinMassSpecPeptides', 5) }
glyph        = segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
fgcolor      =  sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'black', 'grey') }
connector_color = grey
connector = hat
bgcolor = sub { GBrowse::Display::massSpecBgColor(shift) }
height       = sub { GBrowse::Display::heightByCount(shift,32) }
pad_bottom   = -1
description  = 0 
title  = sub {}
#bump density = 100
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift, 'Fiser_Proteomics') }
label 		 = 0
category  = Protein Expression Evidence
key       = MS/MS Peptides (Einstein)
citation  =  Joseph Dybas, Dmitry Rykunov, Carlos Madrid, Edward Nieves, Fa-Yun Che, Hui Xiao, Kami Kim, Louis Weiss, Ruth Hogue Angeletti, Andr&#225;s Fiser (<a href="http://toro.aecom.yu.edu/biodefense/">Einstein Biodefense Proteomics Research Center</a>)

#filterOrganism=C. parvum
[FerrariMassSpecPeptides]
feature      = domain:Ferrari 
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Ferrari&&edName:in('cparIowaII_massSpec_Ferrari_LTQ_RSRC')
#feature      = domain:MassSpecPeptides 
#filter       = sub { GBrowse::Filter::filterByExtDbName(shift, 'Ferrari_Proteomics') }
#filter = sub { $CFG->filter_to_depth( @_, 'FerrariMassSpecPeptides', 5) }
glyph        = segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
fgcolor      =  sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'black', 'grey') }
connector_color = grey
connector = hat
bgcolor = sub { GBrowse::Display::massSpecBgColor(shift) }
height       = sub { GBrowse::Display::heightByCount(shift,32) }
pad_bottom   = -1
description  = 0 
title  = sub {}
#bump density = 100
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift,'Ferrari_Proteomics') }
label 		 = 0
category  = Protein Expression Evidence
key       = MS/MS Peptides (Ferrari)
citation  =  Data provided by Belinda Ferrari and Quach Truong at the Department of Biological Sciences, Macquarie University, Sydney, Australia. 


#filterOrganism=C. parvum
[PutignaniMassSpecPeptides]
feature      = domain:Putingnani 
sqlName      = domain:MassSpecPeptide 
sqlParam     = source:Putingnani&&edName:='cparIowaII_massSpec_Putignani_RSRC'
#feature      = domain:MassSpecPeptides
#filter       = sub { GBrowse::Filter::filterByExtDbName(shift, 'C. parvum mass spec') }
glyph        = segments
# -0 turns off transcript arrows at highlevel zoom
arrow_length = -0
font2color   = black
fgcolor      =  sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'black', 'grey') }
connector_color = grey
connector = hat
bgcolor = sub { GBrowse::Display::massSpecBgColor(shift) }
height       = sub { GBrowse::Display::heightByCount(shift,32) }
pad_bottom   = -1
description  = 0
title  = sub {}
balloon hover  = sub { GBrowse::PopupAndLinks::massSpecTitle(shift,'C. parvum mass spec') }
label            = 0
category  = Protein Expression Evidence
key       = MS/MS Peptides (Putignani)
citation  = C. parvum mass spec data from Lorenza Putignani <br> 


[UnifiedMassSpecPeptides]
category     = Protein Expression Evidence 


[UnifiedMassSpecPeptides:10000]
feature      = UnifiedMassSpecPeptides:density
glyph        = xyplot
graph_type   = boxes
bump density = 1
scale        = right
bgcolor      = lightslategray
fgcolor      = blue
height       = 60
min_score    = 0
#max_score    = 200
title        = sub{}
balloon hover  = sub {}
label        = 0


#filterOrganism=C. hominis,C. muris,C. parvum
[IsolatePopset]
feature      = match:IsolatePopset
glyph        = segments
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'lightblue', 'red') }
bgcolor      = sub { GBrowse::Display::simpleFgColorFromStrand(shift, 'blue', 'darkred') }
bump_limit  = 20
font2color   = grey
stranded     = 1
height       = 6
description  = 0
label        = 0
# TODO
balloon hover        = sub { my $f = shift;
					my $name = $f->name;
					my ($evalue) = $f->get_tag_values('Expect');
					my ($qstart) = $f->get_tag_values('QStart');
					my ($qend) = $f->get_tag_values('QStop');
					my ($desc) = $f->get_tag_values('Note');
					my ($matchlen) = $f->get_tag_values('MatchLen');
					my @data;
					push @data, [ 'Name:'   => $name ];
					push @data, [ 'Score:'  => $f->score ];
					push @data, [ 'Expect:' => $evalue ];
					push @data, [ 'Match:'  => "$matchlen nt" ];
					push @data, [ 'Note:'   => $desc ];
					hover( "$name", \@data);
				}
link		 = sub { my $f = shift; 
					 my $name = $f->name; 
					 return "showRecord.do?name=IsolateRecordClasses.IsolateRecordClass&project_id=CryptoDB&primary_key=$name";
			  }
citation     = Cryptosporidium isolates data
category = Population Biology: B. Isolates
key          = Isolate Sequences Aligned to C. muris, C. hominis and C. parvum Genomes


[Chr6mapping]
feature      = alignment:chr6mapping
sqlName      = alignment:sequence
sqlParam     = edName:='cparIowaII_cparvumChr6Transcripts_transcript_sequences_RSRC'
category      = Gene Models : A. Annotated
glyph        = processed_transcript_gtu
require_subparts = 1
tkcolor       = #CCCCFF
bgcolor      = sub { GBrowse::Display::simpleBgColorFromStrand(shift, 'lightblue', 'pink') }
font2color   = darkgrey
height       = 6
title        = 1
balloon hover = sub { GBrowse::PopupAndLinks::sequenceAlignmentTitle(shift) }
balloon sticky  = 1
label        = 1
description  = 1
key          = Transcripts from alternate Chr6 annotation
citation     = 

#[RnaSeqCpIowaIILippuner]
#feature      = NextGenSeq:cparIowaII_Lippuner_rnaSeq_RSRC
#sqlName      = NextGenSeq:coverageLogSubtracks
#sqlParam     = edname:'cparIowaII_Lippuner_rnaSeq_RSRC'&&operator:=&&negativeValuesField:multiple&&subtrackField:is_reversed
#category     = Transcript Expression Evidence: B. RNA-seq alignments and coverage plots - The transcriptome of intestinal stages of <i>C. parvum</i> - Lippuner et al
#glyph        = xyplot
#graph_type   = boxes
#bump density = 1
#scale        = right
#bgcolor      = blue 
#part_color   = sub { GBrowse::Display::colorByRnaSeq(shift,'blue') } 
#height       = 25 
#min_score    = -5 
#max_score    = 10 
#clip         = 1  
#label        = 0  
#subtrack select = Sample tag_value sample;
#subtrack table  = :'1.2e9' 1.2e9;
#                  :'2.5e9' 2.5e9 ;
##subtrack table  = :'CL1' p731_20110617_CL1 ;
##                  :'CL2' p731_20110617_CL2 ;
##                  :'CL3' p731_20110617_CL3 ;
##                  :'CL4' p731_20110617_CL4 ;
#group_label  = 1  
#group_label_position = top
#key          = C. parvum Iowa II RNASeq; coverage plot (log2)
#citation     = The transcriptome of intestinal stages of C. parvum - Lippuner et al

######### bam file confs################
#include "bam/cryptodb_bam.conf"
